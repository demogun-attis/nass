<!DOCTYPE html>
<html>
    <head>
        <title>
        	NASS 
        </title>
	<link rel="icon" href="https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/320/twitter/248/sweat-droplets_1f4a6.png">
	<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <style>
	{% with radius="0" %}
	* {
		box-sizing: border-box;
	}
	.home {
		float: left;
		width: 33.33%;
		height: 600px;
		padding: 10px;
	}
	.row:after {
		content: "";
		display: table;
		clear: both;
	}
	.home_top1 {
		color:white;
		background: #0fb5ee;
	}
	.home_top2 {
		color:white;
		background: #006cff;
	}
	.home_middle1 {
		color:white;
		background: #ff5251;
	}
	.home_loggingbox {
		float: left;
		color: white;
		background: #5c656d;
		position: absolute;
		bottom: 0;
		width: 90%;
		height: 50%;
	}
    .start_button_div {
    	width: 300px;
	height: 200px;
	background-color: #b5e2ff;
	color: #3792cb;
    }
    .buttonstyle {
      size: 10px;
    }
    div.blueTable {
      border: 1px solid #1C6EA4;
      background-color: #EEEEEE;
      width: 100%;
      text-align: left;
      border-collapse: collapse;
    }
    .divTable.blueTable .divTableCell, .divTable.blueTable .divTableHead {
      border: 1px solid #AAAAAA;
      padding: 3px 2px;
    }
    .divTable.blueTable .divTableBody .divTableCell {
      font-size: 13px;
    }
    .divTable.blueTable .divTableRow:nth-child(even) {
      background: #D0E4F5;
    }
    .divTable.blueTable .divTableHeading {
      background: #1C6EA4;
      background: -moz-linear-gradient(top, #5592bb 0%, #327cad 66%, #1C6EA4 100%);
      background: -webkit-linear-gradient(top, #5592bb 0%, #327cad 66%, #1C6EA4 100%);
      background: linear-gradient(to bottom, #5592bb 0%, #327cad 66%, #1C6EA4 100%);
      border-bottom: 2px solid #444444;
    }
    .divTable.blueTable .divTableHeading .divTableHead {
      font-size: 15px;
      font-weight: bold;
      color: #FFFFFF;
      border-left: 2px solid #D0E4F5;
    }
    .divTable.blueTable .divTableHeading .divTableHead:first-child {
      border-left: none;
    }
    
    .blueTable .tableFootStyle {
      font-size: 14px;
      font-weight: bold;
      color: #FFFFFF;
      background: #D0E4F5;
      background: -moz-linear-gradient(top, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
      background: -webkit-linear-gradient(top, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
      background: linear-gradient(to bottom, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
      border-top: 2px solid #444444;
    }
    .blueTable .tableFootStyle {
      font-size: 14px;
    }
    .blueTable .tableFootStyle .links {
         text-align: right;
    }
    .blueTable .tableFootStyle .links a{
      display: inline-block;
      background: #1C6EA4;
      color: #FFFFFF;
      padding: 2px 8px;
      border-radius: 5px;
    }
    .blueTable.outerTableFooter {
      border-top: none;
    }
    .blueTable.outerTableFooter .tableFootStyle {
      padding: 3px 5px; 
    }
    /* DivTable.com */
    .divTable{ display: table; }
    .divTableRow { display: table-row; }
    .divTableHeading { display: table-header-group;}
    .divTableCell, .divTableHead { display: table-cell;}
    .divTableHeading { display: table-header-group;}
    .divTableFoot { display: table-footer-group;}
    .divTableBody { display: table-row-group;}
    .button {
	  background-color: #4CAF50; /* Green */
	  border: none;
	  color: white;
	  padding: 20px;
	  text-align: center;
	  text-decoration: none;
	  display: inline-block;
	  font-size: 16px;
	  margin: 4px 2px;
	  cursor: pointer;
     }
	
	.button1 {
		border-radius: {{ radius }}px;
	}
	.button1:hover {
  		background-color: #FFFFFF;
		color: #4CAF50
	}
	.button2 {
		border-radius: {{ radius }}px;
		background-color: #008CBA}
	.button2:hover {
  		background-color: #FFFFFF;
		color: #008CBA
	}
	.button3 {
		border-radius: {{ radius }}px;
		background-color: #0c71e0
	}
	.button3:hover {
  		background-color: #FFFFFF;
		color: red
	}
	.button4 {
		background-color: #008CBA;
		border-radius: {{ radius }}px;
		padding: 100px;
	}
	.buttonstat1 {
		background-color: #b5e2ff;
		border-radius: {{ radius }}px;
		padding: 70px;
		color: #3792cb;
	}
	.buttonstat0 {
		background-color: #06c258;
		border-radius: {{ radius }}px;
		padding: 70px;
		color: #1c4966
	}
	.buttonstop1 {
		background-color: #E84C3D;
		border-radius: {{ radius }}px;
		padding: 70px;
		color: white
	}
	.buttonstart1 {
		background-color: #b5e2ff;
		border-radius: {{ radius }}px;
		padding: 70px;
		color: #3792cb
	}
	.buttonstart1:hover {
  		background-color: #4caf50;
		color: #FFFFFF;
	}
	.button5 {border-radius: 50%;}

	

	body {
	  margin: 0;
	  font-family: Arial, Helvetica, sans-serif;
	}
	
	.top-container {
	  background-color: #f1f1f1;
	  padding: 30px;
	  text-align: center;
	}
	
	.header {
	  padding: 10px 16px;
	  background: #45b6fe;
	  color: #f1f1f1;
	}
	
	.content {
	  padding: 0px;
	}
	
	.sticky {
	  position: fixed;
	  top: 0;
	  width: 100%;
	}
	
	.sticky + .content {
	  padding-top: 102px;
	}
	.div-wrapper {
	    position: relative;
	    height: 300px;
	    width: 300px;
	}
	
	.div-wrapper img {
	    position: absolute;
	    left: 0;
	    bottom: 0;
	}
	.individual_page{
		padding: 16px
	}
	{% endwith %}
    </style>
    </head>
    <body style="background-color: #3792cb">
        <div class="header" id="myHeader">
	<button class="button button1" onclick="location.href='{% url 'program_page' %}'">Sprinkle-Sprinkle little NASS</button>
        <button class="button button2" onclick="location.href='{% url 'script' %}'">Get the log!</button>
        <button class="button button3" onclick="location.href='{% url 'individual_runner' %}'">Sprinkle management</button>
	</div>
	<div class="content">
        {% if data %}
	<div class="divTable blueTable">
		<div class="divTableHeading">
			<div class="divTableRow">
				<div class="divTableHead">GPIO ID</div>
				<div class="divTableHead">GPIO Name</div>
				<div class="divTableHead">Date and Time</div>
				<div class="divTableHead">Duration</div>
			</div>	
		</div>
		<div class="divTableBody">
	{% for adat in data %}
			<div class="divTableRow">
				<div class="divTableHead">{{ adat.0 }}</div>
				<div class="divTableHead">{{ adat.1 }}</div>
				<div class="divTableHead">{{ adat.2 }}</div>
				<div class="divTableHead">{{ adat.3 }}</div>
			</div>
		
	{% endfor %}
		</div>
	</div>

	{% elif sprinkling %}
		{% if 'Blooming' in sprinkling.0 %}
			<h1 style="color:white;">{{ sprinkling.0 }}</h1>
			<div class="w3-light-grey">
				<div class="w3-container w3-orange w3-center" style="width:{{ sprinkling.1.0 }}%"><font color=white>{{ sprinkling.1.1.0 }}</font></div>
			</div>
			<div style="padding:5%">
				<center>
						<button class="button buttonstop1" onclick="location.href='{% url 'stop_process' %}'"><h2>Stop Sprinkling</h2></button>
				</center>
			</div>
		{% elif 'All sprinkling stopped' in sprinkling %}
			<h1 style="color:white;">{{ sprinkling }}</h1>
		{% else %}
		<center><h1 style="color:white;">{{ sprinkling.0 }}</h1><center>
				<center>
						<button id="startbutton3" class="button buttonstart1" onclick="move(); hidebutton(id); location.href='{% url 'sprinkle_now' %}'"><h2>Bloom it baby!</h2>
							<div style="background:white">
							<div style="background-color:light-grey; width:100%; height:20px">
								<div id="myBar" class="w3-container w3-orange w3-center" style="width:0%; height:20px"></div>
								<br>
							</div>
							</div>
						</button>
				</center>

		{% endif %}

	{% elif individuals or valve %}
	{{ individuals.0 | safe }}
	<div class="individual_page">
	<button class="button buttonstat{{ individuals.1.0 }}" onclick="location.href='{% url 'valve_switch' %}/?gpioID=9'"><h2>Pump</h2></button>
	<button class="button buttonstat{{ individuals.1.1 }}" onclick="location.href='{% url 'valve_switch' %}/?gpioID=14'"><h2>Front</h2></button>
	<button class="button buttonstat{{ individuals.1.2 }}" onclick="location.href='{% url 'valve_switch' %}/?gpioID=5'"><h2>Terrace</h2></button>
	<button class="button buttonstat{{ individuals.1.3 }}" onclick="location.href='{% url 'valve_switch' %}/?gpioID=23'"><h2>Japanese</h2></button>
	<button class="button buttonstat{{ individuals.1.4 }}" onclick="location.href='{% url 'valve_switch' %}/?gpioID=12'"><h2>Grill-Kitchen</h2></button>
	<button class="button buttonstat{{ individuals.1.5 }}" onclick="location.href='{% url 'valve_switch' %}/?gpioID=3'"><h2>Fruit 1</h2></button>
	<button class="button buttonstat{{ individuals.1.6 }}" onclick="location.href='{% url 'valve_switch' %}/?gpioID=2'"><h2>Fruit 2</h2></button>
	<button class="button buttonstat{{ individuals.1.7 }}" onclick="location.href='{% url 'valve_switch' %}/?gpioID=17'"><h2>Backup</h2></button>
	</div>
	{% else %}
	<center><h1 style="color:white;">NASS Control Room</h1></center>
	<div class="row">
		<div class="home home_middle1">
			<h1>Hey there!</h1> 
			<p>On this page you can control your sprinkles spread around in your garden. Cool isn't it?</p>
			If you already know what you are doing, go to the top menu.<br>
			If you are a newbie, check the hints in the boxes on my right</div>

		<div class="home home_top2">
	<h3>Modes</h3>
	<ul>
		<li><h4>Automated mode</h4>There is a script (run_all_sprinkle.py) which you can run by crontab. e.g:
			<br>0 5,18 * * * python3.7 /path/to/run_all_sprinkle.py</li>
		<li><h4>Running a program manually</h4>Just hit the button <b>Sprinkle-Sprinkle little NASS</b> and start the sequence with <b>Bloom it baby!</b> button. The program will automatically water every area defined in the sprinkle_config for the defined runtime.</li>
		<li><h4>Opening the valves one-by-one</h4> By hitting the "Sprinkle Management" button you can control every valve individually. Keep in mind that in this mode you have to open the pump as well.</li></ul>
		</div>

		<div class="home home_top1">
		<h3>Get the log!</h3>
				With <b>Get the log!</b> button you will get an advanced log ot the runs in the past.
				Every line will contain the gpioID, the name of the circle, the timestamp of opening it, and some duration information.
				<br>If the valve is opened manually you will see the end date instead of the runtime.
		</div>
	</div>
	{% endif %}
	</div>
	<script>
		window.onscroll = function() {myFunction()};
		
		var header = document.getElementById("myHeader");
		var sticky = header.offsetTop;
		
		function myFunction() {
		  if (window.pageYOffset > sticky) {
		    header.classList.add("sticky");
		  } else {
		    header.classList.remove("sticky");
		  }
		}
		
		function move() {

			var elem = document.getElementById("myBar");
			var width = 0;
			var id = setInterval(frame, 30);
			function frame() {
				if (width >= 100) {
					clearInterval(id);
				} else {
					width++;
					elem.style.width = width + '%';
				}
			}
		}
		
		function hidebutton(id){
			if(id == "startbutton3"){
				document.getElementById('startbutton3').onclick = null;
			}
		}
	</script>
        </body>
</html>
